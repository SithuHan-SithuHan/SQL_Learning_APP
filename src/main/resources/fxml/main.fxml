<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.web.WebView?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.coffee_and_code.sql_learning.controller.MainController">
   <top>
      <VBox>
         <MenuBar>
            <menus>
               <Menu text="File">
                  <items>
                     <MenuItem text="New Query" />
                     <MenuItem text="Open Query" />
                     <MenuItem text="Save Query" />
                     <SeparatorMenuItem />
                     <MenuItem text="Exit" />
                  </items>
               </Menu>
               <Menu text="Edit">
                  <items>
                     <MenuItem text="Undo" />
                     <MenuItem text="Redo" />
                     <SeparatorMenuItem />
                     <MenuItem text="Cut" />
                     <MenuItem text="Copy" />
                     <MenuItem text="Paste" />
                  </items>
               </Menu>
               <Menu text="View">
                  <items>
                     <MenuItem text="Database Browser" />
                     <MenuItem text="Full Screen" />
                  </items>
               </Menu>
               <Menu text="Help">
                  <items>
                     <MenuItem text="About" />
                     <MenuItem text="Documentation" />
                  </items>
               </Menu>
            </menus>
         </MenuBar>
      </VBox>
   </top>

   <center>
      <TabPane fx:id="mainTabPane" tabClosingPolicy="UNAVAILABLE">
         <tabs>
            <!-- Learning Tab -->
            <Tab fx:id="learningTab" text="Learning">
               <HBox>
                  <VBox minWidth="250" maxWidth="300" spacing="10">
                     <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                     <Label styleClass="section-header" text="Learning Topics"/>
                     <TreeView fx:id="topicsTreeView" VBox.vgrow="ALWAYS"/>
                     <HBox spacing="10" alignment="CENTER">
                        <Button fx:id="prevTopicBtn" text="Previous"/>
                        <Button fx:id="nextTopicBtn" text="Next"/>
                     </HBox>
                     <ProgressBar fx:id="learningProgressBar" maxWidth="Infinity"/>
                     <Label fx:id="progressLabel" text="Topic 1 of 25"/>
                  </VBox>

                  <VBox HBox.hgrow="ALWAYS" spacing="10">
                     <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                     <WebView fx:id="contentWebView" VBox.vgrow="ALWAYS"/>
                  </VBox>
               </HBox>
            </Tab>

            <!-- Practice Tab -->
            <Tab fx:id="practiceTab" text="Practice">
               <VBox>
                  <HBox VBox.vgrow="ALWAYS">
                     <!-- Left Panel - Questions List -->
                     <VBox minWidth="200" maxWidth="250" spacing="10">
                        <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                        <Label styleClass="section-header" text="Practice Questions"/>
                        <ListView fx:id="questionsList" VBox.vgrow="ALWAYS"/>
                        <ProgressBar fx:id="practiceProgressBar" maxWidth="Infinity"/>
                        <Label text="Progress: 0/12 completed"/>
                     </VBox>

                     <!-- Center Panel - SQL Editor -->
                     <VBox HBox.hgrow="ALWAYS" spacing="10">
                        <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                        <Label fx:id="questionTitleLabel" styleClass="question-title"
                               text="Select a question to begin"/>
                        <WebView fx:id="questionContentWebView" minHeight="150" maxHeight="200"/>

                        <VBox VBox.vgrow="ALWAYS">
                           <Label text="SQL Editor" styleClass="editor-header"/>
                           <VBox fx:id="sqlEditorContainer" VBox.vgrow="ALWAYS"
                                 styleClass="code-editor-container" minHeight="200"/>
                        </VBox>

                        <HBox spacing="10" alignment="CENTER_LEFT">
                           <Button fx:id="executeBtn" text="Execute" styleClass="primary-button"/>
                           <Button fx:id="validateBtn" text="Validate"/>
                           <Button fx:id="resetBtn" text="Reset DB" styleClass="warning-button"/>
                           <Region HBox.hgrow="ALWAYS"/>
                           <Button fx:id="submitBtn" text="Submit Answer"
                                   styleClass="success-button"/>
                        </HBox>

                        <!-- Results Section -->
                        <VBox VBox.vgrow="ALWAYS" minHeight="200">
                           <TabPane>
                              <tabs>
                                 <Tab text="Results">
                                    <TableView fx:id="resultTable" VBox.vgrow="ALWAYS"/>
                                 </Tab>
                                 <Tab text="Output">
                                    <TextArea fx:id="outputTextArea" editable="false"
                                              wrapText="true"/>
                                 </Tab>
                              </tabs>
                           </TabPane>
                        </VBox>
                     </VBox>

                     <!-- Right Panel - Database Browser -->
                     <VBox minWidth="250" maxWidth="300" spacing="10">
                        <padding><Insets top="10" right="10" bottom="10" left="10"/></padding>
                        <Label styleClass="section-header" text="Database Browser"/>
                        <Label text="Tables"/>
                        <ListView fx:id="tablesListView" VBox.vgrow="ALWAYS"/>
                        <Label text="Table Structure"/>
                        <TableView fx:id="tableStructureView" VBox.vgrow="ALWAYS">
                           <columns>
                              <TableColumn fx:id="columnNameCol" text="Column Name"/>
                              <TableColumn fx:id="columnTypeCol" text="Type"/>
                              <TableColumn fx:id="columnSizeCol" text="Size"/>
                              <TableColumn fx:id="columnNullableCol" text="Nullable"/>
                           </columns>
                        </TableView>
                     </VBox>
                  </HBox>

                  <!-- Status Bar -->
                  <HBox spacing="10" styleClass="status-bar">
                     <padding><Insets top="5" right="10" bottom="5" left="10"/></padding>
                     <Label fx:id="statusLabel" text="Ready"/>
                     <Region HBox.hgrow="ALWAYS"/>
                     <Label text="SQL Learning App v1.0"/>
                  </HBox>
               </VBox>
            </Tab>
         </tabs>
      </TabPane>
   </center>
</BorderPane>